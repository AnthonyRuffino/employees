<!doctype html>
<html lang="en" ng-app ng-controller="EmployeeController">

<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="shortcut icon" type="image/x-icon" href="https://www.sandbox.game/images/favicon.png" />
    <script src="/js/modernizr-2.6.2.js"></script>
    <style>
        body {
            padding-top: 60px;
        }

        .hand {
            cursor: pointer;
        }
    </style>
    <script>

      const API = "/api/employee/";
      function EmployeeController($scope) {
        $scope.employees = [];

        $scope.loadEmployees = () => {
          fetch(API)
            .then(function(response) {
              return response.json();
            })
            .then(function(data) {
              $scope.employees = data;
              $scope.$apply();
            });
        };
        $scope.loadEmployees();
      }
    </script>
</head>

<body>
<header>
    <div class="content-wrapper">
        <img href="https://www.sandbox.game/images/favicon.png" />
        <br/>
        <div class="float-right">
            <div class="float-right">
                <p class="site-title">Employees</p>
            </div>
        </div>
    </div>
</header>

<div id="body">

    <section class="content-wrapper main-content clear-fix">

        <section class="featured">

            <div class="content-wrapper">
                <table>
                    <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Position</th>
                        <th>Supervisor</th>
                        <th>Assign Supervisor</th>
                        <th>Delete</th>
                    </tr>
                    <tr ng-repeat="employee in employees">
                        <td>{{employee.id}}</td>
                        <td>{{employee.firstName}}</td>
                        <td>{{employee.lastName}}</td>
                        <td>{{employee.position.name}}</td>
                        <td>
                            {{employee.supervisor && (employee.firstName + ' ' + employee.lastName + ' [ ID: ' + employee.id + ' ]')}}
                        </td>
                        <td>
                            <button>
                                <span style='color: green'>Assign Supervisor</span>
                            </button>
                        </td>
                        <td>
                            <button >Delete User</button>
                        </td>
                    </tr>
                </table>
            </div>
        </section>


    </section>
</div>

<footer>
    <div class="content-wrapper">
        <div class="float-left">
            <p>2019 - Anthony Ruffino</p>
        </div>
    </div>
</footer>

<script src="/js/jquery.min.js"></script>
<script src="/js/angular.min.js"></script>
</body>

</html>
